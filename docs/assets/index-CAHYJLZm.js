(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();const $=120,V=8,S="coolsakeshop-ranking-v2",B={fact:"ソース追及",mirror:"鏡返し",precise:"解像度刺し",empathy:"共感落差",meme:"ミーム皮肉",coolcut:"温度カット",ask:"逆質問",silent:"無言圧"},x=[{id:"source",name:"一次ソースは？",text:"根拠要求",style:"fact",cost:16,power:5.2,risk:2,cd:4.1},{id:"mirror",name:"それ感想ですよね",text:"主語を返す",style:"mirror",cost:18,power:5.5,risk:2.3,cd:4.6},{id:"rough",name:"解像度が粗い",text:"抽象論を冷却",style:"precise",cost:14,power:4.7,risk:1.8,cd:3.2},{id:"sorena",name:"それな、でも",text:"受けて落とす",style:"empathy",cost:12,power:3.4,risk:1,cd:2.6},{id:"shiran",name:"知らんけど",text:"熱量ずらし",style:"meme",cost:10,power:4,risk:2.6,cd:2.2},{id:"yousuru",name:"要するに？",text:"要点詰め",style:"ask",cost:14,power:4.9,risk:1.8,cd:3},{id:"ondo",name:"温度だけ高い",text:"勢い遮断",style:"coolcut",cost:17,power:5.7,risk:2.2,cd:4.2},{id:"mugon",name:"無言の一瞥",text:"大冷却",style:"silent",cost:20,power:6.4,risk:2.9,cd:6},{id:"kusa",name:"その温度で草",text:"ミーム牽制",style:"meme",cost:11,power:4.2,risk:2.4,cd:2.8}],P=[{name:"共感落差",seq:["empathy","mirror"],cool:3.6,score:28,insight:8},{name:"一次ソース詰め",seq:["fact","ask"],cool:4.3,score:34,insight:7},{name:"温度差凍結",seq:["coolcut","silent"],cool:5.3,score:46,insight:6},{name:"草から解像度",seq:["meme","precise"],cool:3.8,score:24,insight:6}],O=[{name:"数字マウント会社員",mood:"功績トーク連投",type:"normal",order:"吟醸ハイボール",weak:["mirror","fact","coolcut"],resist:["empathy","meme"],heatRate:.76,start:[8.5,14.5],target:[-2.1,.2],patience:[16.5,21],base:185,phases:[{topic:"武勇伝",line:"この前の案件、俺が全部回してさ。",cues:["mount"],prefers:["mirror","coolcut"],heat:.26,drain:1.04},{topic:"数字自慢",line:"売上3倍って普通は無理でしょ。",cues:["mount","know"],prefers:["fact","ask"],heat:.32,drain:1.14},{topic:"締め",line:"俺クラスだと空気で分かるから。",cues:["mount"],prefers:["precise","mirror"],heat:.4,drain:1.22}]},{name:"恋バナ相談民",mood:"共感待ち",type:"normal",order:"柚子サワー",weak:["empathy","ask","mirror"],resist:["fact","silent"],heatRate:.62,start:[6.8,12.5],target:[-1.4,.6],patience:[17.5,22],base:165,phases:[{topic:"既読未返信",line:"既読つくのに返信こないの、どう思う？",cues:["romance","victim"],prefers:["empathy","ask"],heat:.12,drain:.95},{topic:"不安拡大",line:"もう脈なしってことかな...。",cues:["romance","victim"],prefers:["empathy","mirror"],heat:.2,drain:1.03},{topic:"強がり",line:"別に期待してないし、知らんけど。",cues:["romance","contra"],prefers:["mirror","meme"],heat:.28,drain:1.12}]},{name:"知ったか情報通",mood:"一次ソース未所持",type:"normal",order:"辛口純米",weak:["fact","precise","ask"],resist:["meme","empathy"],heatRate:.74,start:[7.8,14.2],target:[-2,-.1],patience:[16.2,20.7],base:198,phases:[{topic:"断言",line:"それ、もう業界では常識だよ。",cues:["know"],prefers:["fact","precise"],heat:.22,drain:1.08},{topic:"語気強化",line:"見れば分かるって、説明いらないでしょ。",cues:["know","mount"],prefers:["ask","fact"],heat:.32,drain:1.18},{topic:"逃げ",line:"細かい話は本質じゃないから。",cues:["contra","know"],prefers:["mirror","precise"],heat:.4,drain:1.26}]},{name:"逆張り評論家",mood:"とりあえず否定",type:"normal",order:"青みかんサワー",weak:["ask","mirror","silent"],resist:["meme","empathy"],heatRate:.82,start:[9,15],target:[-2.5,-.4],patience:[15.7,20.1],base:210,phases:[{topic:"逆張り導入",line:"流行ってる時点で浅いんだよね。",cues:["contra"],prefers:["ask","mirror"],heat:.24,drain:1.12},{topic:"概念マウント",line:"理解できる人だけ分かればいいから。",cues:["contra","mount"],prefers:["silent","precise"],heat:.33,drain:1.2},{topic:"逃げ道",line:"個人の感想だけど反論は不要。",cues:["contra","know"],prefers:["mirror","ask"],heat:.42,drain:1.28}]}],R=[{name:"熱血セミナー講師",mood:"声量MAX",type:"hot",order:"灼熱レモンサワー",weak:["coolcut","silent","fact"],resist:["meme","empathy"],heatRate:1.62,start:[12.8,19.2],target:[-4.5,-1.2],patience:[14.2,17.4],base:340,phases:[{topic:"気合押し",line:"魂が燃えてれば温度計なんて不要！",cues:["hot"],prefers:["coolcut","silent"],heat:.72,drain:1.35},{topic:"根拠無視",line:"データより熱意だ、熱意！",cues:["hot","mount"],prefers:["fact","ask"],heat:.86,drain:1.46},{topic:"絶叫",line:"今この瞬間に限界を超えろ！！",cues:["hot"],prefers:["coolcut","mirror"],heat:.95,drain:1.58}]},{name:"配信系熱量モンスター",mood:"連投テンション",type:"hot",order:"爆熱ジンジャー",weak:["fact","precise","coolcut"],resist:["meme","mirror"],heatRate:1.67,start:[13.2,20.1],target:[-4.7,-1.5],patience:[13.9,16.8],base:368,phases:[{topic:"長文お気持ち",line:"今の空気、全部言語化しておくね。",cues:["hot","victim"],prefers:["precise","fact"],heat:.74,drain:1.36},{topic:"自己正当化",line:"本気だからこそ言い方が強くなるんだよ。",cues:["hot","know"],prefers:["ask","coolcut"],heat:.88,drain:1.5},{topic:"最終通告",line:"理解できない人は置いていくから。",cues:["hot","mount"],prefers:["coolcut","silent"],heat:1,drain:1.62}]}],t={running:!1,customerId:1,active:null,hand:[],score:0,combo:0,timeLeft:$,fuel:72,insight:45,battle:0,rhythm:0,stun:0,lock:0,tick:0,lastTick:0,elapsed:0,lastMash:0,lastStyle:null,streak:0,chain:[],cd:{},logs:[],ranking:[],resultScore:0,served:0},a={time:s("time-value"),score:s("score-value"),combo:s("combo-value"),fuel:s("fuel-value"),insight:s("insight-value"),startBtn:s("start-btn"),typeBadge:s("type-badge"),customerName:s("customer-name"),customerMood:s("customer-mood"),phaseTopic:s("phase-topic"),customerLine:s("customer-line"),orderName:s("order-name"),tempValue:s("temp-value"),targetValue:s("target-value"),tempFill:s("temp-fill"),patienceValue:s("patience-value"),patienceFill:s("patience-fill"),fuelMeterValue:s("fuel-meter-value"),fuelFill:s("fuel-fill"),battleWrap:s("battle-wrap"),battleValue:s("battle-value"),battleFill:s("battle-fill"),rhythmWrap:s("rhythm-wrap"),rhythmValue:s("rhythm-value"),rhythmFill:s("rhythm-fill"),statusLine:s("status-line"),cardButtons:s("card-buttons"),hotActions:s("hot-actions"),rhythmGuide:s("rhythm-guide"),uoBtn:s("uo-btn"),serveBtn:s("serve-btn"),logList:s("log-list"),rankingList:s("ranking-list"),resultModal:s("result-modal"),finalScore:s("final-score"),resultNote:s("result-note"),playerName:s("player-name"),saveBtn:s("save-btn"),retryBtn:s("retry-btn")};function s(e){const n=document.getElementById(e);if(!n)throw new Error(`Missing element: ${e}`);return n}function u(e,n,r){return Math.min(r,Math.max(n,e))}function g(e,n){return Math.random()*(n-e)+e}function I(e,n){return Math.floor(Math.random()*(n-e+1))+e}function A(e){return e[I(0,e.length-1)]}function H(e){const n=Math.max(0,Math.floor(e));return`${String(Math.floor(n/60)).padStart(2,"0")}:${String(n%60).padStart(2,"0")}`}function m(e){t.logs.unshift(`[${H(t.timeLeft)}] ${e}`),t.logs=t.logs.slice(0,V),N()}function b(e){return e.t.phases[e.phase]}function U(){return{fact:0,mirror:0,precise:0,empathy:0,meme:0,coolcut:0,ask:0,silent:0}}function F(){const e={};return x.forEach(n=>e[n.id]=0),e}function E(e,n){const r=b(e),o=x.filter(l=>!n.has(l.id)),c=(o.length>0?o:x).map(l=>{let h=1;return e.t.weak.includes(l.style)&&(h+=2.2),r.prefers.includes(l.style)&&(h+=1.7),e.t.resist.includes(l.style)&&(h-=.35),{x:l,w:Math.max(.1,h)}}),d=c.reduce((l,h)=>l+h.w,0);let y=Math.random()*d;for(const l of c)if(y-=l.w,y<=0)return l.x;return c[c.length-1].x}function W(e){t.hand=[];for(let n=0;n<4;n+=1)t.hand.push(E(e,new Set(t.hand.map(r=>r.id))))}function D(e){const n=t.active;if(!n)return;const r=new Set;t.hand.forEach((o,i)=>{i!==e&&r.add(o.id)}),t.hand[e]=E(n,r)}function v(){t.running=!0,t.customerId=1,t.active=null,t.hand=[],t.score=0,t.combo=0,t.timeLeft=$,t.fuel=72,t.insight=45,t.battle=0,t.rhythm=0,t.stun=0,t.lock=0,t.elapsed=0,t.lastMash=0,t.lastStyle=null,t.streak=0,t.chain=[],t.cd=F(),t.logs=[],t.resultScore=0,t.served=0,a.resultModal.classList.add("hidden"),a.saveBtn.disabled=!1,a.startBtn.textContent="営業中...",a.startBtn.disabled=!0,m("開店。客の会話パターンを読んで冷却を組み立てる。"),L(),G(),f()}function G(){clearInterval(t.tick),t.lastTick=performance.now(),t.tick=window.setInterval(()=>{const e=performance.now(),n=Math.max(.016,(e-t.lastTick)/1e3);t.lastTick=e,J(n)},80)}function q(){clearInterval(t.tick)}function L(){if(!t.running)return;const e=t.timeLeft>30?.36:.26,n=A(Math.random()<e?R:O),r=g(n.patience[0],n.patience[1]);t.active={id:t.customerId,t:n,temp:g(n.start[0],n.start[1]),target:g(n.target[0],n.target[1]),patience:r,maxPatience:r,phase:0,phaseLeft:g(4.8,6.4),styleUse:U(),variety:new Set,failPressure:0},t.customerId+=1,t.lastStyle=null,t.streak=0,t.chain=[],t.lastMash=0,t.rhythm=0,t.battle=n.type==="hot"?g(38,48):0,W(t.active),m(`${n.type==="hot"?"熱血客":"通常客"}「${n.name}」来店。${n.type==="hot"?"55%以上の熱気制圧が必要。":"フェーズ一致カードが有効。"}`),f()}function J(e){if(!t.running)return;if(t.elapsed+=e,t.timeLeft=Math.max(0,t.timeLeft-e),t.timeLeft<=0){X();return}t.lock=Math.max(0,t.lock-e),t.stun=Math.max(0,t.stun-e),t.fuel=u(t.fuel+(t.stun>0?6.2:11.3)*e,0,100),t.insight=u(t.insight-2.4*e,0,100),x.forEach(c=>{t.cd[c.id]=Math.max(0,t.cd[c.id]-e)});const n=t.active;if(!n){L();return}n.phaseLeft-=e,n.phaseLeft<=0&&(n.phase=(n.phase+1)%n.t.phases.length,n.phaseLeft=g(4.5,6.8),m(`話題変化: ${b(n).topic}`));const r=b(n);let o=n.t.heatRate+r.heat;n.t.type==="hot"&&(o+=(100-t.battle)*.012,t.battle=u(t.battle-e*9.4,0,100),t.rhythm=u(t.rhythm-e*19,0,100)),n.temp+=o*e;let i=r.drain;if(t.streak>=3&&(i+=.08),n.patience-=i*e,n.t.type==="hot"&&t.battle<=0?n.failPressure+=e:n.failPressure=Math.max(0,n.failPressure-e*.75),n.patience<=0){p("待ちくたびれて退店",!1);return}if(n.temp>=46){p("熱気で酒温が暴走",!0);return}if(n.failPressure>=3.1){p("熱気に飲み込まれて会話不能",!0);return}f()}function K(e){if(t.chain.length<e.length)return!1;const n=t.chain.slice(-e.length);for(let r=0;r<e.length;r+=1)if(n[r].style!==e[r])return!1;return!0}function z(e){t.chain=t.chain.filter(n=>t.elapsed-n.at<=7.2);for(const n of P)if(K(n.seq)){e.temp-=n.cool,t.score+=n.score,t.insight=u(t.insight+n.insight,0,100),t.combo+=1,t.chain=[],m(`連携成立「${n.name}」: -${n.cool.toFixed(1)}℃`);break}}function k(e){if(!t.running||t.stun>0||t.lock>0)return;const n=t.active;if(!n)return;const r=t.hand[e];if(!r)return;if(t.cd[r.id]>.01){a.statusLine.textContent=`「${r.name}」はCD中 (${t.cd[r.id].toFixed(1)}s)`;return}if(t.fuel<r.cost){n.temp+=.9,n.patience-=.4,t.insight=u(t.insight-3,0,100),t.combo=Math.max(0,t.combo-1),m(`燃料不足で「${r.name}」不発`),f();return}t.lock=.34,t.fuel=u(t.fuel-r.cost,0,100),t.cd[r.id]=r.cd;const o=b(n),i=n.styleUse[r.style],c=o.prefers.includes(r.style),d=n.t.weak.includes(r.style),y=n.t.resist.includes(r.style);let l=r.power;l*=c?1.35:.82,d&&(l*=1.28),y&&(l*=.62),l*=Math.max(.5,1-i*.17-(t.lastStyle===r.style?.09:0)),n.t.type==="hot"&&(l*=.74+t.battle*.0058),t.insight>=70&&c&&(l+=1.2);let h=r.risk;if(h*=c?.62:1.25,y&&(h*=1.35),i>=2&&(h*=1.2),n.temp=u(n.temp-l+h*.42,-24,60),n.patience=u(n.patience-(c?.1:.72)-(y?.82:0),0,n.maxPatience),r.style==="empathy"&&(o.cues.includes("romance")||o.cues.includes("victim"))&&(n.patience=u(n.patience+.95,0,n.maxPatience)),r.style==="silent"&&o.cues.includes("hot")&&(n.temp-=1.3),t.insight=u(t.insight+(c?12:-7)+(d?5:0)-(y?5:0),0,100),t.score+=Math.max(0,Math.floor(l*10+(c?8:0)-h*2)),t.combo=c?t.combo+1:Math.max(0,t.combo-1),t.chain.push({style:r.style,at:t.elapsed}),z(n),n.styleUse[r.style]+=1,n.variety.add(r.style),t.lastStyle===r.style?t.streak+=1:(t.streak=1,t.lastStyle=r.style),m(`${r.name} ${c?"適合":"外し"} (${B[r.style]}) -${l.toFixed(1)}℃`),D(e),n.patience<=0){p("皮肉が刺さりすぎて帰宅",!1);return}if(n.temp>=46){p("煽り返されて酒温暴走",!0);return}f()}function M(){if(!t.running||t.stun>0||t.lock>0)return;const e=t.active;if(!e||e.t.type!=="hot")return;if(t.fuel<4){a.statusLine.textContent="燃料不足で『うおｗ』が弱い";return}const n=t.lastMash>0?t.elapsed-t.lastMash:.24;t.lastMash=t.elapsed,t.fuel=u(t.fuel-4,0,100),t.lock=.04;let r=35,o=2.2,i=.45,c=0;if(n>=.14&&n<=.32?(r=100,o=8.4,i=1.7,t.score+=5):n>.32&&n<=.52?(r=72,o=5.4,i=1,t.score+=3):n<.1?(r=12,o=.7,i=-.8,c=.78,t.combo=Math.max(0,t.combo-1)):n>.75&&(r=18,o=1,i=0),t.rhythm=r,t.battle=u(t.battle+o,0,100),e.temp=u(e.temp-i,-24,60),e.patience=u(e.patience-c,0,e.maxPatience),r>=95&&Math.random()<.18&&m("うおｗリズム成功: 熱気を押し返した"),r<=15&&m("連打しすぎで空振り。テンポが重要"),e.patience<=0){p("熱血客が呆れて帰った",!0);return}f()}function w(){if(!t.running||t.stun>0||t.lock>0)return;const e=t.active;if(!e)return;const n=e.t.type!=="hot"||t.battle>=55;if(!(e.temp<=e.target)){p("冷却不足で提供失敗",e.t.type==="hot");return}if(!n){p("熱気ゲージ不足で提供できず",!0);return}const o=e.t.base+e.variety.size*22+Math.floor(t.insight*2)+t.combo*11+Math.floor(t.timeLeft*(e.t.type==="hot"?.95:.7))+(e.temp<=e.target-4?80:0)+(e.t.type==="hot"?220:0);t.score+=o,t.served+=1,t.combo+=e.t.type==="hot"?2:1,t.timeLeft=Math.min(150,t.timeLeft+(e.t.type==="hot"?4.5:2.6)),m(`提供成功 +${o}pt (${e.t.type==="hot"?"熱血":"通常"}, 型${e.variety.size}種)`),L()}function p(e,n){const r=t.active;r&&(t.combo=0,t.insight=u(t.insight-12,0,100),n||r.t.type==="hot"?(t.score=Math.max(0,t.score-130),t.stun=Math.max(t.stun,2.8),m(`${e}。熱気に押されて硬直 2.8秒。`)):(t.score=Math.max(0,t.score-65),m(`${e}。客が帰ってしまった。`)),L())}function X(){t.running=!1,q(),t.resultScore=Math.floor(t.score),a.finalScore.textContent=String(t.resultScore),a.resultNote.textContent=`提供数 ${t.served} / 最終読解 ${Math.round(t.insight)}%`,a.resultModal.classList.remove("hidden"),a.startBtn.disabled=!1,a.startBtn.textContent="もう一度営業",a.statusLine.textContent="営業終了。結果を保存できます。",m(`営業終了: ${t.resultScore}pt`),f()}function _(){const e=a.playerName.value.trim()||"名無し店員",n={name:e,score:t.resultScore,date:new Date().toLocaleDateString("ja-JP")};t.ranking=[...t.ranking,n].sort((r,o)=>o.score-r.score).slice(0,10),localStorage.setItem(S,JSON.stringify(t.ranking)),a.saveBtn.disabled=!0,T(),m(`ランキング保存: ${e} (${n.score}pt)`)}function j(){const e=localStorage.getItem(S);if(!e){t.ranking=[];return}try{const n=JSON.parse(e);if(!Array.isArray(n)){t.ranking=[];return}t.ranking=n.filter(r=>typeof r.name=="string"&&typeof r.score=="number"&&typeof r.date=="string").slice(0,10)}catch{t.ranking=[]}}function C(){a.cardButtons.innerHTML="",t.hand.forEach((e,n)=>{const r=document.createElement("button"),o=t.cd[e.id];r.type="button",r.className="card-btn",r.disabled=!t.running||t.stun>0||t.lock>0||o>.01,r.innerHTML=`<span class="card-title">${n+1}. ${e.name}</span><span class="card-text">${e.text}</span><span class="card-meta">${B[e.style]} | 燃料-${e.cost} | 冷却${e.power.toFixed(1)}${o>.01?` / CD ${o.toFixed(1)}s`:""}</span>`,r.addEventListener("click",()=>k(n)),a.cardButtons.appendChild(r)})}function N(){a.logList.innerHTML="";for(const e of t.logs){const n=document.createElement("li");n.textContent=e,a.logList.appendChild(n)}}function T(){if(a.rankingList.innerHTML="",t.ranking.length===0){const e=document.createElement("li");e.textContent="まだ記録がありません",a.rankingList.appendChild(e);return}t.ranking.forEach(e=>{const n=document.createElement("li");n.textContent=`${e.name} - ${e.score}pt (${e.date})`,a.rankingList.appendChild(n)})}function f(){a.time.textContent=t.timeLeft.toFixed(1),a.score.textContent=String(Math.floor(t.score)),a.combo.textContent=String(t.combo),a.fuel.textContent=String(Math.round(t.fuel)),a.insight.textContent=String(Math.round(t.insight)),a.fuelMeterValue.textContent=`${Math.round(t.fuel)}%`,a.fuelFill.style.width=`${u(t.fuel,0,100)}%`;const e=t.active,n=!t.running||t.stun>0||t.lock>0;if(!e){a.customerName.textContent="待機中",a.customerMood.textContent="雰囲気: -",a.phaseTopic.textContent="会話フェーズ: -",a.customerLine.textContent="次の客を待っています。",a.orderName.textContent="-",a.tempValue.textContent="-",a.targetValue.textContent="-",a.tempFill.style.width="0%",a.patienceValue.textContent="-",a.patienceFill.style.width="0%",a.battleValue.textContent="0%",a.battleFill.style.width="0%",a.rhythmValue.textContent="0%",a.rhythmFill.style.width="0%",a.battleWrap.classList.add("hidden"),a.rhythmWrap.classList.add("hidden"),a.hotActions.classList.add("hidden"),a.serveBtn.disabled=!0,a.uoBtn.disabled=!0,C();return}const r=b(e);a.typeBadge.textContent=e.t.type==="hot"?"熱血客":"通常客",a.typeBadge.className=e.t.type==="hot"?"badge hot":"badge normal",a.customerName.textContent=e.t.name,a.customerMood.textContent=`雰囲気: ${e.t.mood}`,a.phaseTopic.textContent=`会話フェーズ: ${r.topic} (${e.phaseLeft.toFixed(1)}s)`,a.customerLine.textContent=`「${r.line}」`,a.orderName.textContent=e.t.order,a.tempValue.textContent=`${e.temp.toFixed(1)}℃`,a.targetValue.textContent=`${e.target.toFixed(1)}℃`,a.tempFill.style.width=`${u((e.temp+24)/70*100,0,100)}%`;const o=u(e.patience/e.maxPatience*100,0,100);a.patienceValue.textContent=`${Math.round(o)}%`,a.patienceFill.style.width=`${o}%`,a.battleValue.textContent=`${Math.round(t.battle)}%`,a.battleFill.style.width=`${u(t.battle,0,100)}%`,a.rhythmValue.textContent=`${Math.round(t.rhythm)}%`,a.rhythmFill.style.width=`${u(t.rhythm,0,100)}%`;const i=e.t.type==="hot";a.battleWrap.classList.toggle("hidden",!i),a.rhythmWrap.classList.toggle("hidden",!i),a.hotActions.classList.toggle("hidden",!i),a.uoBtn.disabled=n||!i||t.fuel<4,a.serveBtn.disabled=n||!t.running,t.running?t.stun>0?a.statusLine.textContent=`熱気で硬直中... ${t.stun.toFixed(1)}秒`:i&&t.battle<55?a.statusLine.textContent="熱血客: リズム入力で熱気ゲージ55%以上に維持":e.temp>e.target?a.statusLine.textContent="フェーズ一致カードで冷却を狙う":a.statusLine.textContent="提供可能。温度と熱気条件を満たしている":a.statusLine.textContent=a.resultModal.classList.contains("hidden")?"営業開始でスタート。":"営業終了。結果を保存できます。",a.rhythmGuide.textContent=i&&t.rhythm>=70?"良いテンポ。0.14〜0.32秒が最強":"連打しすぎると逆効果。一定リズムが有効",C()}function Y(){a.startBtn.addEventListener("click",v),a.retryBtn.addEventListener("click",v),a.uoBtn.addEventListener("click",M),a.serveBtn.addEventListener("click",w),a.saveBtn.addEventListener("click",_),document.addEventListener("keydown",e=>{e.key==="1"?k(0):e.key==="2"?k(1):e.key==="3"?k(2):e.key==="4"?k(3):e.key==="Enter"?w():e.code==="Space"&&(e.preventDefault(),M())})}function Q(){t.cd=F(),j(),T(),N(),Y(),f()}Q();
